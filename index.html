<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Saadat Notes</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="site-header">
        <div class="header-content">
            <a href="index.html" class="logo-area">
                <img src="https://i.ibb.co/68c1mP7/Saadat-Notes-Logo.png" alt="Saadat Notes Logo">
                <div class="logo-text"><h1>Saadat Notes</h1><p>For Dept. of Mathematics (2023-2024)</p></div>
            </a>
            <button class="hamburger-menu" id="hamburger-menu-btn" aria-label="Open menu">
                <svg class="icon" width="24" height="24" viewBox="0 0 24 24"><path d="M3 12H21" stroke-width="2" stroke="currentColor" stroke-linecap="round"/><path d="M3 6H21" stroke-width="2" stroke="currentColor" stroke-linecap="round"/><path d="M3 18H21" stroke-width="2" stroke="currentColor" stroke-linecap="round"/></svg>
            </button>
        </div>
    </header>

    <div class="mobile-nav-panel" id="mobile-nav">
        <button class="close-nav" id="close-nav-btn" aria-label="Close menu">&times;</button>
        <nav><ul><li><a href="index.html">Dashboard</a></li><li><a href="notes.html">Hand Notes</a></li><li><a href="gallery.html">Gallery</a></li><li><a href="contact.html">Contact Us</a></li></ul></nav>
    </div>

    <main class="page-container" id="dashboard-page">
        <div id="dashboard-header"></div>
        <div id="search-container"><input type="search" id="search-input" class="form-input" placeholder="üîç Search notes, gallery, contact..."><ul id="search-results"></ul></div>
        <div class="resource-grid">
            <a href="notes.html"><h3>üìö Hand Notes</h3><p style="color:var(--text-secondary);font-size:0.9rem;">Browse subject-wise notes</p></a>
            <a href="gallery.html"><h3>üñºÔ∏è Gallery</h3><p style="color:var(--text-secondary);font-size:0.9rem;">View campus life and works</p></a>
            <a href="contact.html"><h3>‚úâÔ∏è Contact Us</h3><p style="color:var(--text-secondary);font-size:0.9rem;">Send a message or feedback</p></a>
        </div>
    </main>

    <div id="registration-modal" class="modal-overlay">
        <div class="modal-box">
            <h2>Personalize Your Experience</h2>
            <p style="color:var(--text-secondary);margin-bottom:1.5rem;">Enter your details to see a personalized welcome.</p>
            <form id="registration-form">
                <div class="form-group"><label for="studentName">Full Name</label><input type="text" id="studentName" required class="modal-input"></div>
                <div class="form-group"><label for="academicYear">Academic Info</label><input type="text" id="academicYear" placeholder="e.g., Honours 1st Year" required class="modal-input"></div>
                <button type="submit" class="primary-button" style="width:100%;">Save & Continue</button>
            </form>
        </div>
    </div>
    
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const headerEl = document.getElementById('dashboard-header');
            const studentData = JSON.parse(localStorage.getItem('saadatStudentData'));

            function updateDashboardHeader(data) {
                headerEl.innerHTML = `<div style="display:flex;align-items:center;gap:1rem;"><div><h2>Welcome back, ${data.name}!</h2><p style="color:var(--text-secondary);">${data.year}</p></div></div>`;
            }

            if (studentData) {
                updateDashboardHeader(studentData);
            } else {
                headerEl.innerHTML = `<h2>Welcome to Saadat Notes</h2><p style="color:var(--text-secondary);">Register to personalize your experience.</p><button id="register-btn" class="primary-button" style="margin-top:1rem;">Register Now</button>`;
                document.getElementById('register-btn').addEventListener('click', () => { document.getElementById('registration-modal').classList.add('visible'); });
            }

            const regForm = document.getElementById('registration-form');
            if (regForm) {
                regForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const newStudentData = { name: document.getElementById('studentName').value, year: document.getElementById('academicYear').value };
                    localStorage.setItem('saadatStudentData', JSON.stringify(newStudentData));
                    alert('Registration successful!');
                    window.location.reload();
                });
            }

            const searchInput = document.getElementById('search-input'), searchResultsEl = document.getElementById('search-results');
            const searchableContent = [ { title: "Hand Notes", url: "notes.html" }, { title: "Gallery", url: "gallery.html" }, { title: "Contact", url: "contact.html" }];
            searchInput.addEventListener('keyup', () => {
                const term = searchInput.value.toLowerCase();
                if (!term) { searchResultsEl.innerHTML = ''; return; }
                const results = searchableContent.filter(item => item.title.toLowerCase().includes(term));
                searchResultsEl.innerHTML = results.map(item => `<li><a href="${item.url}">${item.title}</a></li>`).join('');
            });
        });
    </script>
</body>
</html>